# Login & Signup Page - 로그인/회원가입 페이지

## 페이지 정보
- **URL**: `/login` (query parameter: `?mode=login|signup|forgot`)
- **접근 권한**: 누구나 (비회원)
- **목적**: 회원가입, 로그인, 비밀번호 재설정
- **핵심 메시지**: "간편하게 시작하세요"

---

## 1. 데스크톱 레이아웃 (1280px)

### 1.1 로그인 모드

```
┌─────────────────────────────────────────────────────────────────┐
│  [← 뒤로] 마음쉼표                                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│    ┌───────────────┐                ┌────────────────────────┐ │
│    │               │                │                        │ │
│    │               │                │   다시 만나서 반가워요! │ │
│    │               │                │                        │ │
│    │  [일러스트]    │                │  ┌──────────────────┐ │ │
│    │               │                │  │ 이메일           │ │ │
│    │  따뜻한 색감의 │                │  └──────────────────┘ │ │
│    │  감정 이미지   │                │                        │ │
│    │               │                │  ┌──────────────────┐ │ │
│    │               │                │  │ 비밀번호   [👁]  │ │ │
│    │               │                │  └──────────────────┘ │ │
│    │               │                │                        │ │
│    │               │                │  [비밀번호 찾기]        │ │
│    │               │                │                        │ │
│    └───────────────┘                │  [로그인]              │ │
│                                     │                        │ │
│                                     │  ───── 또는 ─────      │ │
│                                     │                        │ │
│                                     │  [Google로 계속하기]   │ │
│                                     │  [Kakao로 계속하기]    │ │
│                                     │                        │ │
│                                     │  계정이 없으신가요?     │ │
│                                     │  [회원가입]            │ │
│                                     │                        │ │
│                                     └────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
      ↑ 좌측 일러스트                  ↑ 우측 로그인 폼
```

---

### 1.2 회원가입 모드

```
┌─────────────────────────────────────────────────────────────────┐
│  [← 뒤로] 마음쉼표                                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│    ┌───────────────┐                ┌────────────────────────┐ │
│    │               │                │  마음쉼표와 함께       │ │
│    │               │                │  시작해보세요          │ │
│    │  [일러스트]    │                │                        │ │
│    │               │                │  ┌──────────────────┐ │ │
│    │               │                │  │ 닉네임           │ │ │
│    │               │                │  └──────────────────┘ │ │
│    │               │                │  6자 이상             │ │
│    │               │                │                        │ │
│    │               │                │  ┌──────────────────┐ │ │
│    │               │                │  │ 이메일           │ │ │
│    │               │                │  └──────────────────┘ │ │
│    │               │                │  example@email.com    │ │
│    │               │                │                        │ │
│    │               │                │  ┌──────────────────┐ │ │
│    │               │                │  │ 비밀번호   [👁]  │ │ │
│    └───────────────┘                │  └──────────────────┘ │ │
│                                     │  8자 이상, 영문+숫자   │ │
│                                     │                        │ │
│                                     │  ☐ 이용약관 동의 (필수) │ │
│                                     │  ☐ 개인정보 동의 (필수) │ │
│                                     │                        │ │
│                                     │  [회원가입]            │ │
│                                     │                        │ │
│                                     │  ───── 또는 ─────      │ │
│                                     │                        │ │
│                                     │  [Google로 계속하기]   │ │
│                                     │  [Kakao로 계속하기]    │ │
│                                     │                        │ │
│                                     │  이미 계정이 있으신가요? │ │
│                                     │  [로그인]              │ │
│                                     │                        │ │
│                                     └────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 모바일 레이아웃 (375px)

### 2.1 로그인 모드

```
┌───────────────────────┐
│ [←] 로그인             │
└───────────────────────┘

┌───────────────────────┐
│                       │
│  다시 만나서 반가워요!  │
│                       │
│  ┌─────────────────┐  │
│  │ 이메일          │  │
│  └─────────────────┘  │
│                       │
│  ┌─────────────────┐  │
│  │ 비밀번호  [👁]  │  │
│  └─────────────────┘  │
│                       │
│  [비밀번호 찾기]       │
│                       │
│  [로그인]             │
│                       │
│  ───── 또는 ─────     │
│                       │
│  [🔵 Google]          │
│  [🟡 Kakao]           │
│                       │
│  계정이 없으신가요?    │
│  [회원가입]           │
│                       │
└───────────────────────┘
```

---

### 2.2 회원가입 모드

```
┌───────────────────────┐
│ [←] 회원가입           │
└───────────────────────┘

┌───────────────────────┐
│  마음쉼표와            │
│  함께 시작해보세요     │
│                       │
│  ┌─────────────────┐  │
│  │ 닉네임          │  │
│  └─────────────────┘  │
│  6자 이상             │
│                       │
│  ┌─────────────────┐  │
│  │ 이메일          │  │
│  └─────────────────┘  │
│                       │
│  ┌─────────────────┐  │
│  │ 비밀번호  [👁]  │  │
│  └─────────────────┘  │
│  8자 이상, 영문+숫자   │
│                       │
│  ☐ 이용약관 동의 (필수)│
│  ☐ 개인정보 동의 (필수)│
│                       │
│  [회원가입]           │
│                       │
│  ───── 또는 ─────     │
│                       │
│  [🔵 Google]          │
│  [🟡 Kakao]           │
│                       │
│  이미 계정이 있으신가요?│
│  [로그인]             │
│                       │
└───────────────────────┘
```

---

## 3. 컴포넌트 분해

### 3.1 Header (Simple)
- Back Button (← 홈으로)
- Logo

### 3.2 Two-Column Layout (Desktop Only)
- **Left**: 일러스트 (40% width)
- **Right**: 폼 (60% width, max-width: 480px)

### 3.3 Form Container
- Card with shadow
- Padding: 48px (desktop), 24px (mobile)
- Border-radius: 16px

### 3.4 Form Elements

#### Email Input
```jsx
<Input
  type="email"
  label="이메일"
  placeholder="example@email.com"
  required
  validation="email"
/>
```

#### Password Input
```jsx
<Input
  type="password"
  label="비밀번호"
  placeholder="••••••••"
  required
  rightIcon={<EyeIcon />}  // 토글 가능
  validation="min:8,pattern:alphanumeric"
/>
```

#### Nickname Input (회원가입만)
```jsx
<Input
  type="text"
  label="닉네임"
  placeholder="마음쉼표유저"
  required
  validation="min:2,max:20"
  helperText="2-20자 이내"
/>
```

#### Checkbox (약관 동의)
```jsx
<Checkbox
  label="이용약관에 동의합니다 (필수)"
  required
  link="/terms"
/>
<Checkbox
  label="개인정보 처리방침에 동의합니다 (필수)"
  required
  link="/privacy"
/>
```

### 3.5 Social Login Buttons
```jsx
<Button variant="social-google">
  <GoogleIcon /> Google로 계속하기
</Button>

<Button variant="social-kakao">
  <KakaoIcon /> Kakao로 계속하기
</Button>
```

**Styles**:
- Google: White background, Gray-700 text, Gray-300 border
- Kakao: #FEE500 background, #3C1E1E text

---

## 4. 상태별 UI

### 4.1 초기 상태 (비어있음)
- 모든 필드 비어있음
- 버튼 활성화 (하지만 클릭 시 검증)

### 4.2 입력 중 (Typing)
- Focus 상태: Border primary-500
- 실시간 검증 (이메일 형식, 비밀번호 길이)

### 4.3 검증 오류
```
┌─────────────────────┐
│ 이메일              │ ← border-error-500
└─────────────────────┘
❌ 올바른 이메일 형식이 아닙니다
```

### 4.4 검증 성공
```
┌─────────────────────┐
│ user@example.com    │ ← border-success-500
└─────────────────────┘
✅ 사용 가능한 이메일입니다
```

### 4.5 로딩 (Submit 중)
```
[⏳ 로그인 중...]  ← 버튼 disabled, spinner
```

### 4.6 로그인 성공
- Toast 표시: "환영합니다!"
- Redirect to `/dashboard` (또는 리턴 URL)

### 4.7 로그인 실패
```
┌─────────────────────────────────┐
│ ❌ 이메일 또는 비밀번호가 일치하지│
│    않습니다.                     │
└─────────────────────────────────┘
```

---

## 5. 인터랙션

### 5.1 로그인 ↔ 회원가입 전환
- URL 변경: `/login?mode=login` ↔ `/login?mode=signup`
- 부드러운 페이드 전환 (300ms)
- 폼 필드 리셋

### 5.2 비밀번호 표시/숨김
- Eye Icon 클릭: `type="password"` ↔ `type="text"`
- Icon 변경: 👁 ↔ 👁‍🗨

### 5.3 실시간 검증
- **이메일**: `onBlur` 이벤트에서 형식 검증
- **비밀번호**: `onChange` 이벤트에서 길이/복잡도 검증
- **닉네임**: `onChange` 이벤트에서 길이 검증

### 5.4 약관 링크
- 클릭 시 모달 또는 새 탭에서 약관 내용 표시

---

## 6. API 연동

### 6.1 이메일 로그인
```
POST /api/auth/login
Request:
{
  "email": "user@example.com",
  "password": "password123!"
}

Response (200):
{
  "success": true,
  "data": {
    "user": { /* User 객체 */ },
    "tokens": {
      "accessToken": "...",
      "refreshToken": "...",
      "expiresIn": 3600
    }
  }
}

Error (401):
{
  "success": false,
  "error": {
    "code": "AUTH_INVALID_CREDENTIALS",
    "message": "이메일 또는 비밀번호가 일치하지 않습니다."
  }
}
```

### 6.2 이메일 회원가입
```
POST /api/auth/register
Request:
{
  "email": "user@example.com",
  "password": "password123!",
  "nickname": "마음쉼표유저",
  "isAnonymous": false
}

Response (201):
{
  "success": true,
  "data": {
    "user": { /* User 객체 */ },
    "tokens": { /* Tokens */ }
  }
}

Error (409):
{
  "success": false,
  "error": {
    "code": "USER_ALREADY_EXISTS",
    "message": "이미 존재하는 이메일입니다."
  }
}
```

### 6.3 소셜 로그인 (Google)
```
GET /api/auth/google
→ Redirects to Google OAuth consent screen

GET /api/auth/google/callback?code={auth_code}
→ Handles OAuth callback
→ Returns tokens or redirects to /auth/callback?accessToken=...
```

### 6.4 비밀번호 재설정 요청
```
POST /api/auth/forgot-password
Request:
{
  "email": "user@example.com"
}

Response (200):
{
  "success": true,
  "message": "비밀번호 재설정 이메일이 전송되었습니다."
}
```

---

## 7. 비밀번호 재설정 플로우

### 7.1 비밀번호 찾기 클릭

```
┌───────────────────────┐
│  비밀번호를 잊으셨나요? │
│                       │
│  ┌─────────────────┐  │
│  │ 이메일          │  │
│  └─────────────────┘  │
│                       │
│  [재설정 링크 전송]    │
│                       │
│  [← 로그인으로 돌아가기]│
│                       │
└───────────────────────┘
```

### 7.2 이메일 발송 완료

```
┌───────────────────────┐
│  ✅ 이메일 발송 완료   │
│                       │
│  user@example.com으로 │
│  비밀번호 재설정       │
│  링크를 전송했습니다.  │
│                       │
│  이메일이 도착하지     │
│  않으셨나요?           │
│  [재전송]             │
│                       │
│  [로그인으로 돌아가기] │
│                       │
└───────────────────────┘
```

### 7.3 비밀번호 재설정 (이메일 링크 클릭 후)

URL: `/reset-password?token={reset_token}`

```
┌───────────────────────┐
│  새 비밀번호 설정      │
│                       │
│  ┌─────────────────┐  │
│  │ 새 비밀번호  [👁]│  │
│  └─────────────────┘  │
│  8자 이상, 영문+숫자   │
│                       │
│  ┌─────────────────┐  │
│  │ 비밀번호 확인[👁]│  │
│  └─────────────────┘  │
│                       │
│  [비밀번호 변경]       │
│                       │
└───────────────────────┘
```

---

## 8. 폼 검증 규칙

### 8.1 이메일
- 필수 입력
- 형식: `email` 정규식
- 에러 메시지: "올바른 이메일 형식이 아닙니다"

### 8.2 비밀번호
- 필수 입력
- 최소 8자
- 영문 대소문자, 숫자, 특수문자 중 3가지 이상
- 에러 메시지:
  - "비밀번호는 8자 이상이어야 합니다"
  - "비밀번호는 영문, 숫자, 특수문자를 포함해야 합니다"

### 8.3 비밀번호 확인 (회원가입)
- 필수 입력
- 비밀번호와 일치해야 함
- 에러 메시지: "비밀번호가 일치하지 않습니다"

### 8.4 닉네임 (회원가입)
- 필수 입력
- 2-20자
- 특수문자 제한 (일부 허용: _, -)
- 에러 메시지:
  - "닉네임은 2자 이상이어야 합니다"
  - "닉네임은 20자 이하여야 합니다"
  - "사용할 수 없는 특수문자가 포함되어 있습니다"

### 8.5 약관 동의 (회원가입)
- 필수 체크
- 에러 메시지: "필수 약관에 동의해주세요"

---

## 9. 접근성

### 9.1 폼 레이블
```html
<label for="email">이메일</label>
<input id="email" type="email" aria-required="true" />
```

### 9.2 에러 메시지
```html
<input
  id="email"
  aria-invalid="true"
  aria-describedby="email-error"
/>
<span id="email-error" role="alert">
  올바른 이메일 형식이 아닙니다
</span>
```

### 9.3 키보드 네비게이션
- Tab: 필드 순차 이동
- Enter: 폼 제출
- Escape: 모달 닫기 (약관)

---

## 10. 보안 고려사항

### 10.1 비밀번호 보안
- 클라이언트: `type="password"` (마스킹)
- 전송: HTTPS only
- 서버: bcrypt 해싱

### 10.2 CSRF 방지
- CSRF 토큰 헤더 포함

### 10.3 Rate Limiting
- 로그인 시도: 5회/15분
- 초과 시: "너무 많은 시도입니다. 15분 후 다시 시도해주세요"

### 10.4 소셜 로그인 보안
- State 파라미터 검증 (CSRF)
- Redirect URI 화이트리스트

---

## 11. 구현 우선순위

### Phase 1 (MVP)
1. ✅ 이메일 로그인 폼
2. ✅ 이메일 회원가입 폼
3. ✅ 폼 검증 (실시간)
4. ✅ API 연동 (로그인, 회원가입)
5. ✅ 에러 처리

### Phase 2
6. Google 소셜 로그인
7. Kakao 소셜 로그인
8. 비밀번호 재설정

### Phase 3
9. 익명 로그인
10. 2단계 인증 (OTP)

---

## 12. 디자인 토큰

### 12.1 폼 필드
```css
Input:
  height: 48px
  padding: 12px 16px
  border-radius: 8px
  border: 1px solid gray-300
  font-size: 16px

Input:focus:
  border: 1px solid primary-500
  ring: 2px primary-500
```

### 12.2 버튼
```css
Primary Button (로그인/회원가입):
  height: 48px
  padding: 12px 24px
  background: primary-500
  color: white
  font-weight: 500
  border-radius: 8px

Social Button:
  height: 48px
  background: white (Google) / #FEE500 (Kakao)
  border: 1px solid gray-300
```

---

## 결론

로그인/회원가입 페이지는 사용자의 **첫 진입점**입니다.
**간편하고 빠르게** 시작할 수 있도록 하면서, **보안**도 철저히 지켜야 합니다.

다음: `03-emotion-log-page.md`
