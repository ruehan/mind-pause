# Mind Pause ê¸°ìˆ  ì•„í‚¤í…ì²˜

> ì‘ì„±ì¼: 2024-11-18
> ë²„ì „: 1.0.0
> ìƒíƒœ: ì§„í–‰ ì¤‘

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ì£¼ìš” ì»´í¬ë„ŒíŠ¸](#ì£¼ìš”-ì»´í¬ë„ŒíŠ¸)
5. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
6. [API êµ¬ì¡°](#api-êµ¬ì¡°)
7. [ì¸ì¦ ë° ë³´ì•ˆ](#ì¸ì¦-ë°-ë³´ì•ˆ)
8. [ë°°í¬ ë° ì¸í”„ë¼](#ë°°í¬-ë°-ì¸í”„ë¼)
9. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
10. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…](#ëª¨ë‹ˆí„°ë§-ë°-ë¡œê¹…)

---

## ì‹œìŠ¤í…œ ê°œìš”

### í•µì‹¬ ê¸°ëŠ¥

Mind PauseëŠ” AI ê¸°ë°˜ ì‹¬ë¦¬ ìƒë‹´ í”Œë«í¼ìœ¼ë¡œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

- ğŸ¤– **AI ìƒë‹´ ì±—ë´‡**: GPT-4 ê¸°ë°˜ ê³µê°ì  ëŒ€í™”
- ğŸ“Š **ê°ì • íŠ¸ë˜í‚¹**: ì¼ë³„ ê°ì • ê¸°ë¡ ë° ë¶„ì„
- ğŸ“ˆ **í†µê³„ ëŒ€ì‹œë³´ë“œ**: ê°ì • íŒ¨í„´ ì‹œê°í™”
- ğŸ‘¥ **ì»¤ë®¤ë‹ˆí‹°**: ì‚¬ìš©ì ê°„ ìµëª… ê³µìœ 
- ğŸ¯ **ì±Œë¦°ì§€**: ìŠµê´€ í˜•ì„± ë° ëª©í‘œ ë‹¬ì„±
- ğŸš¨ **ìœ„ê¸° ê°ì§€**: ìì‚´/ìí•´ ì¡°ê¸° ê°ì§€ ë° ê°œì…

### ì„¤ê³„ ì›ì¹™

1. **ì‚¬ìš©ì ì•ˆì „ ìµœìš°ì„ **: ìœ„ê¸° ìƒí™© ì¦‰ê° ëŒ€ì‘
2. **í”„ë¼ì´ë²„ì‹œ ë³´í˜¸**: ìµëª…ì„± ë³´ì¥, ë°ì´í„° ì•”í˜¸í™”
3. **í™•ì¥ ê°€ëŠ¥ì„±**: ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜
4. **ì„±ëŠ¥ ìµœì í™”**: ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (< 2ì´ˆ)
5. **ì ‘ê·¼ì„±**: ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” UI/UX

---

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ | ëª©ì  |
|---------|------|------|------|
| **í”„ë ˆì„ì›Œí¬** | Next.js | 14.x | React ê¸°ë°˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ |
| **ì–¸ì–´** | TypeScript | 5.x | íƒ€ì… ì•ˆì •ì„± |
| **ìƒíƒœ ê´€ë¦¬** | React Context | - | ì „ì—­ ìƒíƒœ ê´€ë¦¬ |
| **ìŠ¤íƒ€ì¼ë§** | Tailwind CSS | 3.x | ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ CSS |
| **ì°¨íŠ¸** | Recharts | 2.x | ë°ì´í„° ì‹œê°í™” |
| **HTTP** | Fetch API | - | API í†µì‹  |
| **SSE** | EventSource | - | ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° |

### ë°±ì—”ë“œ

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ | ëª©ì  |
|---------|------|------|------|
| **í”„ë ˆì„ì›Œí¬** | FastAPI | 0.104.x | ê³ ì„±ëŠ¥ Python ì›¹ í”„ë ˆì„ì›Œí¬ |
| **ì–¸ì–´** | Python | 3.11.x | ë°±ì—”ë“œ ë¡œì§ |
| **ORM** | SQLAlchemy | 2.x | ë°ì´í„°ë² ì´ìŠ¤ ORM |
| **ì¸ì¦** | JWT | - | í† í° ê¸°ë°˜ ì¸ì¦ |
| **LLM** | OpenAI GPT-4 | - | AI ëŒ€í™” ì—”ì§„ |
| **ê²€ì¦** | Pydantic | 2.x | ë°ì´í„° ê²€ì¦ |

### ë°ì´í„°ë² ì´ìŠ¤

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ | ëª©ì  |
|---------|------|------|------|
| **RDBMS** | PostgreSQL | 15.x | ì£¼ ë°ì´í„°ë² ì´ìŠ¤ |
| **ë²¡í„° DB** | pgvector | 0.5.x | ì„ë² ë”© ì €ì¥ (í–¥í›„) |

### DevOps & ì¸í”„ë¼

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ëª©ì  |
|---------|------|------|
| **ë²„ì „ ê´€ë¦¬** | Git | ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ |
| **íŒ¨í‚¤ì§€ ê´€ë¦¬** | npm, pip | ì˜ì¡´ì„± ê´€ë¦¬ |
| **í™˜ê²½ ë³€ìˆ˜** | .env | ì„¤ì • ê´€ë¦¬ |
| **ë¡œê¹…** | Python logging | ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ |

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì (User)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTPS
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   í”„ë¡ íŠ¸ì—”ë“œ (Next.js)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Pages: Home, Chat, Dashboard, Community, Profile         â”‚
â”‚  â€¢ Components: Reusable UI components                       â”‚
â”‚  â€¢ Lib: API client, utilities                               â”‚
â”‚  â€¢ Context: Global state (Auth, Toast)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ REST API / SSE
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë°±ì—”ë“œ (FastAPI)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              API Layer (v1)                          â”‚   â”‚
â”‚  â”‚  â€¢ conversation.py   - ëŒ€í™” API                      â”‚   â”‚
â”‚  â”‚  â€¢ auth.py           - ì¸ì¦ API                      â”‚   â”‚
â”‚  â”‚  â€¢ emotion_log.py    - ê°ì • ê¸°ë¡ API                 â”‚   â”‚
â”‚  â”‚  â€¢ feedback.py       - í”¼ë“œë°± API                    â”‚   â”‚
â”‚  â”‚  â€¢ ai_character.py   - ìºë¦­í„° API                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Service Layer                             â”‚   â”‚
â”‚  â”‚  â€¢ context_service   - ì»¨í…ìŠ¤íŠ¸ êµ¬ì¶•                 â”‚   â”‚
â”‚  â”‚  â€¢ emotion_service   - ê°ì • ë¶„ì„                     â”‚   â”‚
â”‚  â”‚  â€¢ crisis_detection  - ìœ„ê¸° ê°ì§€                     â”‚   â”‚
â”‚  â”‚  â€¢ response_validation - ì‘ë‹µ ê²€ì¦                   â”‚   â”‚
â”‚  â”‚  â€¢ preference_service - ì„ í˜¸ë„ í•™ìŠµ                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Prompt Layer                              â”‚   â”‚
â”‚  â”‚  â€¢ prompt_builder    - í”„ë¡¬í”„íŠ¸ ìƒì„±                 â”‚   â”‚
â”‚  â”‚  â€¢ few_shot_examples - ì˜ˆì œ ë°ì´í„°                   â”‚   â”‚
â”‚  â”‚  â€¢ dynamic_few_shot  - ë™ì  ì˜ˆì œ ì„ íƒ                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Data Layer (SQLAlchemy)                 â”‚   â”‚
â”‚  â”‚  â€¢ User, Conversation, Message                       â”‚   â”‚
â”‚  â”‚  â€¢ EmotionLog, Feedback                              â”‚   â”‚
â”‚  â”‚  â€¢ AICharacter, UserPromptPreference                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚ â”‚ OpenAI GPT-4 â”‚ â”‚   í™˜ê²½ ë³€ìˆ˜   â”‚
â”‚              â”‚ â”‚              â”‚ â”‚   (.env)     â”‚
â”‚  â€¢ ì‚¬ìš©ì     â”‚ â”‚  â€¢ ëŒ€í™” ìƒì„±  â”‚ â”‚              â”‚
â”‚  â€¢ ëŒ€í™”       â”‚ â”‚  â€¢ ê°ì • ë¶„ì„  â”‚ â”‚ â€¢ DB URL     â”‚
â”‚  â€¢ ê°ì • ë¡œê·¸  â”‚ â”‚              â”‚ â”‚ â€¢ API Key    â”‚
â”‚  â€¢ í”¼ë“œë°±     â”‚ â”‚              â”‚ â”‚ â€¢ JWT Secret â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ë³„ ì—­í• 

#### 1. API Layer
- HTTP ìš”ì²­ ìˆ˜ì‹  ë° ì‘ë‹µ
- ì…ë ¥ ê²€ì¦ (Pydantic)
- ì¸ì¦/ì¸ê°€ í™•ì¸
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ

#### 2. Service Layer
- í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•© (OpenAI, etc.)
- ë°ì´í„° ë³€í™˜ ë° ì²˜ë¦¬

#### 3. Prompt Layer
- LLM í”„ë¡¬í”„íŠ¸ ìƒì„±
- Few-shot ì˜ˆì œ ê´€ë¦¬
- ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ êµ¬ì¶•

#### 4. Data Layer
- ë°ì´í„°ë² ì´ìŠ¤ CRUD
- íŠ¸ëœì­ì…˜ ê´€ë¦¬
- ë°ì´í„° ëª¨ë¸ ì •ì˜

---

## ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### ë°±ì—”ë“œ ì»´í¬ë„ŒíŠ¸

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                      # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”œâ”€â”€ config.py                    # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ database.py                  # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â””â”€â”€ endpoints/
â”‚   â”‚           â”œâ”€â”€ auth.py          # ì¸ì¦ API
â”‚   â”‚           â”œâ”€â”€ conversation.py  # ëŒ€í™” API
â”‚   â”‚           â”œâ”€â”€ emotion_log.py   # ê°ì • ê¸°ë¡ API
â”‚   â”‚           â”œâ”€â”€ feedback.py      # í”¼ë“œë°± API
â”‚   â”‚           â”œâ”€â”€ ai_character.py  # ìºë¦­í„° API
â”‚   â”‚           â””â”€â”€ user.py          # ì‚¬ìš©ì API
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.py                  # ì‚¬ìš©ì ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ conversation.py          # ëŒ€í™” ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ message.py               # ë©”ì‹œì§€ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ emotion_log.py           # ê°ì • ë¡œê·¸ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ feedback.py              # í”¼ë“œë°± ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ ai_character.py          # AI ìºë¦­í„° ëª¨ë¸
â”‚   â”‚   â””â”€â”€ user_prompt_preference.py # ì„ í˜¸ë„ ëª¨ë¸
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ context_service.py       # ì»¨í…ìŠ¤íŠ¸ êµ¬ì¶•
â”‚   â”‚   â”œâ”€â”€ emotion_service.py       # ê°ì • ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ crisis_detection_service.py # ìœ„ê¸° ê°ì§€
â”‚   â”‚   â”œâ”€â”€ response_validation_service.py # ì‘ë‹µ ê²€ì¦
â”‚   â”‚   â”œâ”€â”€ preference_service.py    # ì„ í˜¸ë„ í•™ìŠµ
â”‚   â”‚   â”œâ”€â”€ summary_service.py       # ëŒ€í™” ìš”ì•½
â”‚   â”‚   â””â”€â”€ memory_service.py        # ë©”ëª¨ë¦¬ ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”œâ”€â”€ prompt_builder.py        # í”„ë¡¬í”„íŠ¸ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ few_shot_examples.py     # Few-shot ì˜ˆì œ
â”‚   â”‚   â””â”€â”€ dynamic_few_shot.py      # ë™ì  ì˜ˆì œ ì„ íƒ
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ auth.py                  # JWT ì¸ì¦
â”‚       â”œâ”€â”€ dependencies.py          # FastAPI ì˜ì¡´ì„±
â”‚       â””â”€â”€ validators.py            # ê²€ì¦ ìœ í‹¸
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ test_auth.py
    â”œâ”€â”€ test_conversation.py
    â””â”€â”€ ...
```

### í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸

```
app/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.tsx                    # í™ˆí˜ì´ì§€
â”‚   â”œâ”€â”€ login.tsx                    # ë¡œê·¸ì¸
â”‚   â”œâ”€â”€ signup.tsx                   # íšŒì›ê°€ì…
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â””â”€â”€ [id].tsx                 # ëŒ€í™”ë°©
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ emotions.tsx             # ê°ì • ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â””â”€â”€ feedback.tsx             # í”¼ë“œë°± í†µê³„
â”‚   â”œâ”€â”€ community/
â”‚   â”‚   â””â”€â”€ index.tsx                # ì»¤ë®¤ë‹ˆí‹°
â”‚   â””â”€â”€ profile/
â”‚       â””â”€â”€ index.tsx                # í”„ë¡œí•„
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx          # ë©”ì‹œì§€ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx         # ì…ë ¥ì°½
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx        # ë©”ì‹œì§€ ë²„ë¸”
â”‚   â”‚   â”œâ”€â”€ AICharacterSelector.tsx  # ìºë¦­í„° ì„ íƒ
â”‚   â”‚   â””â”€â”€ AICharacterCreateModal.tsx # ìºë¦­í„° ìƒì„±
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ EmotionChart.tsx         # ê°ì • ì°¨íŠ¸
â”‚   â”‚   â””â”€â”€ StatCard.tsx             # í†µê³„ ì¹´ë“œ
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ Button.tsx               # ë²„íŠ¼
â”‚   â”‚   â”œâ”€â”€ Input.tsx                # ì…ë ¥ í•„ë“œ
â”‚   â”‚   â””â”€â”€ Modal.tsx                # ëª¨ë‹¬
â”‚   â””â”€â”€ layout/
â”‚       â”œâ”€â”€ Header.tsx               # í—¤ë”
â”‚       â””â”€â”€ Navigation.tsx           # ë„¤ë¹„ê²Œì´ì…˜
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts                       # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ auth.ts                      # ì¸ì¦ ìœ í‹¸
â”‚   â””â”€â”€ utils.ts                     # ìœ í‹¸ë¦¬í‹°
â”‚
â”œâ”€â”€ context/
â”‚   â”œâ”€â”€ AuthContext.tsx              # ì¸ì¦ ì»¨í…ìŠ¤íŠ¸
â”‚   â””â”€â”€ ToastContext.tsx             # í† ìŠ¤íŠ¸ ì»¨í…ìŠ¤íŠ¸
â”‚
â””â”€â”€ styles/
    â””â”€â”€ globals.css                  # ì „ì—­ ìŠ¤íƒ€ì¼
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚ PK
â”‚ email       â”‚ UNIQUE
â”‚ password    â”‚
â”‚ nickname    â”‚
â”‚ created_at  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚
       â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EmotionLog  â”‚ â”‚ Conversation   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚ â”‚ id             â”‚ PK
â”‚ user_id     â”‚ â”‚ user_id        â”‚ FK
â”‚ emotion     â”‚ â”‚ character_id   â”‚ FK
â”‚ intensity   â”‚ â”‚ title          â”‚
â”‚ note        â”‚ â”‚ created_at     â”‚
â”‚ date        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                         â”‚ 1:N
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Message   â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                  â”‚ id          â”‚ PK
                  â”‚ conv_id     â”‚ FK
                  â”‚ role        â”‚ (user/assistant)
                  â”‚ content     â”‚
                  â”‚ created_at  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ 1:1
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Feedback   â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                  â”‚ id          â”‚ PK
                  â”‚ message_id  â”‚ FK
                  â”‚ user_id     â”‚ FK
                  â”‚ rating      â”‚
                  â”‚ category    â”‚
                  â”‚ comment     â”‚
                  â”‚ created_at  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AICharacter        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ PK
â”‚ user_id              â”‚ FK
â”‚ name                 â”‚
â”‚ personality          â”‚
â”‚ description          â”‚
â”‚ avatar_options       â”‚ JSON
â”‚ is_active            â”‚
â”‚ created_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UserPromptPreference â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ PK
â”‚ user_id              â”‚ FK
â”‚ preferred_length     â”‚
â”‚ preferred_tone       â”‚
â”‚ emoji_preference     â”‚
â”‚ confidence_score     â”‚
â”‚ total_feedbacks      â”‚
â”‚ updated_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” í…Œì´ë¸” ìƒì„¸

#### User (ì‚¬ìš©ì)
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    nickname VARCHAR(100),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

#### Conversation (ëŒ€í™”ë°©)
```sql
CREATE TABLE conversations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    character_id UUID REFERENCES ai_characters(id) ON DELETE SET NULL,
    title VARCHAR(255),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_conversations_user_id ON conversations(user_id);
CREATE INDEX idx_conversations_created_at ON conversations(created_at DESC);
```

#### Message (ë©”ì‹œì§€)
```sql
CREATE TABLE messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    conversation_id UUID NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,
    role VARCHAR(50) NOT NULL CHECK (role IN ('user', 'assistant')),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_messages_conversation_id ON messages(conversation_id);
CREATE INDEX idx_messages_created_at ON messages(created_at DESC);
```

#### EmotionLog (ê°ì • ê¸°ë¡)
```sql
CREATE TABLE emotion_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    emotion VARCHAR(50) NOT NULL,
    intensity INTEGER NOT NULL CHECK (intensity BETWEEN 1 AND 5),
    note TEXT,
    date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_emotion_logs_user_id ON emotion_logs(user_id);
CREATE INDEX idx_emotion_logs_date ON emotion_logs(date DESC);
```

#### Feedback (í”¼ë“œë°±)
```sql
CREATE TABLE feedbacks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id UUID NOT NULL REFERENCES messages(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    rating INTEGER NOT NULL CHECK (rating BETWEEN 1 AND 5),
    category VARCHAR(100),
    comment TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_feedbacks_message_id ON feedbacks(message_id);
CREATE INDEX idx_feedbacks_user_id ON feedbacks(user_id);
CREATE INDEX idx_feedbacks_rating ON feedbacks(rating);
```

#### AICharacter (AI ìºë¦­í„°)
```sql
CREATE TABLE ai_characters (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    personality VARCHAR(200) NOT NULL,
    description TEXT,
    avatar_options JSONB,
    is_active BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_ai_characters_user_id ON ai_characters(user_id);
CREATE INDEX idx_ai_characters_is_active ON ai_characters(is_active);
```

#### UserPromptPreference (ì‚¬ìš©ì ì„ í˜¸ë„)
```sql
CREATE TABLE user_prompt_preferences (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID UNIQUE NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    preferred_length VARCHAR(50) DEFAULT 'medium',
    preferred_tone VARCHAR(50) DEFAULT 'balanced',
    emoji_preference VARCHAR(50) DEFAULT 'minimal',
    confidence_score FLOAT DEFAULT 0.0 CHECK (confidence_score BETWEEN 0.0 AND 1.0),
    total_feedbacks INTEGER DEFAULT 0,
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_user_prompt_preferences_user_id ON user_prompt_preferences(user_id);
```

---

## API êµ¬ì¡°

### ì¸ì¦ (Authentication)

#### POST `/api/v1/auth/signup`
íšŒì›ê°€ì…

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123!",
  "nickname": "í–‰ë³µí•œì‚¬ìš©ì"
}
```

**Response** (201):
```json
{
  "message": "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤",
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "nickname": "í–‰ë³µí•œì‚¬ìš©ì"
  }
}
```

#### POST `/api/v1/auth/login`
ë¡œê·¸ì¸

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123!"
}
```

**Response** (200):
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "nickname": "í–‰ë³µí•œì‚¬ìš©ì"
  }
}
```

### ëŒ€í™” (Conversation)

#### POST `/api/v1/conversations`
ìƒˆ ëŒ€í™”ë°© ìƒì„±

**Headers**:
```
Authorization: Bearer <token>
```

**Request**:
```json
{
  "character_id": "uuid",
  "title": "ì˜¤ëŠ˜ì˜ ìƒë‹´"
}
```

**Response** (201):
```json
{
  "id": "uuid",
  "character_id": "uuid",
  "title": "ì˜¤ëŠ˜ì˜ ìƒë‹´",
  "created_at": "2024-11-18T10:00:00Z"
}
```

#### GET `/api/v1/conversations`
ëŒ€í™”ë°© ëª©ë¡ ì¡°íšŒ

**Response** (200):
```json
[
  {
    "id": "uuid",
    "title": "ì˜¤ëŠ˜ì˜ ìƒë‹´",
    "character": {
      "id": "uuid",
      "name": "ë”°ëœ»í•œ ì¹œêµ¬",
      "personality": "ê³µê°í•˜ê³  ê²©ë ¤í•˜ëŠ” ì¹œêµ¬"
    },
    "last_message": "í˜ë‚´ì„¸ìš”! í•¨ê»˜ í•´ê²°í•´ë´ìš” ğŸ’ª",
    "created_at": "2024-11-18T10:00:00Z",
    "message_count": 15
  }
]
```

#### POST `/api/v1/conversations/{id}/messages/stream`
ë©”ì‹œì§€ ì „ì†¡ (SSE ìŠ¤íŠ¸ë¦¬ë°)

**Request**:
```json
{
  "content": "ìš”ì¦˜ ë„ˆë¬´ í˜ë“¤ì–´ìš”..."
}
```

**Response** (SSE Stream):
```
event: token
data: {"token": "í˜"}

event: token
data: {"token": "ë“¤"}

event: token
data: {"token": "ì–´"}

...

event: done
data: {"message_id": "uuid"}
```

### ê°ì • ê¸°ë¡ (Emotion Log)

#### POST `/api/v1/emotion-logs`
ê°ì • ê¸°ë¡

**Request**:
```json
{
  "emotion": "ë¶ˆì•ˆ",
  "intensity": 4,
  "note": "ë°œí‘œ ë•Œë¬¸ì— ê¸´ì¥ë¼ìš”",
  "date": "2024-11-18"
}
```

**Response** (201):
```json
{
  "id": "uuid",
  "emotion": "ë¶ˆì•ˆ",
  "intensity": 4,
  "note": "ë°œí‘œ ë•Œë¬¸ì— ê¸´ì¥ë¼ìš”",
  "date": "2024-11-18",
  "created_at": "2024-11-18T10:00:00Z"
}
```

#### GET `/api/v1/emotion-logs?start_date=2024-11-01&end_date=2024-11-18`
ê°ì • ê¸°ë¡ ì¡°íšŒ

**Response** (200):
```json
[
  {
    "id": "uuid",
    "emotion": "ë¶ˆì•ˆ",
    "intensity": 4,
    "note": "ë°œí‘œ ë•Œë¬¸ì— ê¸´ì¥ë¼ìš”",
    "date": "2024-11-18"
  },
  ...
]
```

### í”¼ë“œë°± (Feedback)

#### POST `/api/v1/feedback`
í”¼ë“œë°± ì œì¶œ

**Request**:
```json
{
  "message_id": "uuid",
  "rating": 5,
  "category": "helpful",
  "comment": "ì •ë§ ë„ì›€ì´ ë˜ì—ˆì–´ìš”!"
}
```

**Response** (201):
```json
{
  "id": "uuid",
  "message_id": "uuid",
  "rating": 5,
  "category": "helpful",
  "comment": "ì •ë§ ë„ì›€ì´ ë˜ì—ˆì–´ìš”!",
  "created_at": "2024-11-18T10:00:00Z"
}
```

#### GET `/api/v1/feedback/stats?period=week`
í”¼ë“œë°± í†µê³„

**Response** (200):
```json
{
  "total_count": 150,
  "average_rating": 4.3,
  "positive_ratio": 0.82,
  "category_distribution": {
    "helpful": 60,
    "empathetic": 50,
    "actionable": 40
  },
  "rating_trend": [
    {"date": "2024-11-12", "average": 4.2},
    {"date": "2024-11-13", "average": 4.5},
    ...
  ]
}
```

### AI ìºë¦­í„° (AI Character)

#### POST `/api/v1/ai-characters`
ìºë¦­í„° ìƒì„±

**Request**:
```json
{
  "name": "ë”°ëœ»í•œ ì¹œêµ¬",
  "personality": "ê³µê°í•˜ê³  ê²©ë ¤í•˜ëŠ” ì¹œêµ¬",
  "description": "í•­ìƒ ê³ì—ì„œ ì‘ì›í•´ì£¼ëŠ” ì¹œêµ¬",
  "avatar_options": {
    "sex": "man",
    "hairStyle": "normal",
    "hairColor": "#000",
    ...
  }
}
```

**Response** (201):
```json
{
  "id": "uuid",
  "name": "ë”°ëœ»í•œ ì¹œêµ¬",
  "personality": "ê³µê°í•˜ê³  ê²©ë ¤í•˜ëŠ” ì¹œêµ¬",
  "description": "í•­ìƒ ê³ì—ì„œ ì‘ì›í•´ì£¼ëŠ” ì¹œêµ¬",
  "avatar_options": {...},
  "is_active": true,
  "created_at": "2024-11-18T10:00:00Z"
}
```

---

## ì¸ì¦ ë° ë³´ì•ˆ

### JWT ì¸ì¦

**í† í° êµ¬ì¡°**:
```json
{
  "header": {
    "alg": "HS256",
    "typ": "JWT"
  },
  "payload": {
    "sub": "user-uuid",
    "email": "user@example.com",
    "exp": 1700308800
  },
  "signature": "..."
}
```

**í† í° ìƒì„±**:
```python
def create_access_token(data: dict, expires_delta: timedelta = None):
    to_encode = data.copy()
    expire = datetime.utcnow() + (expires_delta or timedelta(hours=24))
    to_encode.update({"exp": expire})
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
    return encoded_jwt
```

**í† í° ê²€ì¦**:
```python
async def get_current_user(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        user_id: str = payload.get("sub")
        if user_id is None:
            raise HTTPException(status_code=401)
        return user_id
    except JWTError:
        raise HTTPException(status_code=401)
```

### ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ

**í•´ì‹± (bcrypt)**:
```python
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def hash_password(password: str) -> str:
    return pwd_context.hash(password)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    return pwd_context.verify(plain_password, hashed_password)
```

### CORS ì„¤ì •

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],  # í”„ë¡ íŠ¸ì—”ë“œ ë„ë©”ì¸
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ

**.env íŒŒì¼** (ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ì•ŠìŒ):
```env
DATABASE_URL=postgresql://user:password@localhost/mindpause
OPENAI_API_KEY=sk-...
JWT_SECRET_KEY=your-secret-key-here
JWT_ALGORITHM=HS256
```

**ì„¤ì • ë¡œë“œ**:
```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    database_url: str
    openai_api_key: str
    jwt_secret_key: str
    jwt_algorithm: str = "HS256"

    class Config:
        env_file = ".env"

settings = Settings()
```

---

## ë°°í¬ ë° ì¸í”„ë¼

### ê°œë°œ í™˜ê²½

**í”„ë¡ íŠ¸ì—”ë“œ**:
```bash
npm run dev  # http://localhost:3000
```

**ë°±ì—”ë“œ**:
```bash
uvicorn app.main:app --reload --port 8000  # http://localhost:8000
```

**ë°ì´í„°ë² ì´ìŠ¤**:
```bash
# PostgreSQL ë¡œì»¬ ì‹¤í–‰
psql -U postgres
CREATE DATABASE mindpause;
```

### í”„ë¡œë•ì…˜ í™˜ê²½ (ì˜ˆìƒ)

**í”„ë¡ íŠ¸ì—”ë“œ**:
- **í”Œë«í¼**: Vercel
- **ë¹Œë“œ**: `npm run build`
- **ë°°í¬**: ìë™ ë°°í¬ (Git push)

**ë°±ì—”ë“œ**:
- **í”Œë«í¼**: Railway / Render / AWS EC2
- **ì„œë²„**: Gunicorn + Uvicorn workers
- **í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬**: systemd / PM2

**ë°ì´í„°ë² ì´ìŠ¤**:
- **í”Œë«í¼**: Railway / AWS RDS
- **ë°±ì—…**: ì¼ì¼ ìë™ ë°±ì—…
- **ë³µì œ**: Read replica (í–¥í›„)

---

## ì„±ëŠ¥ ìµœì í™”

### í”„ë¡ íŠ¸ì—”ë“œ

1. **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**:
   ```typescript
   const DashboardPage = dynamic(() => import('../pages/dashboard'), {
     loading: () => <LoadingSpinner />,
   });
   ```

2. **ì´ë¯¸ì§€ ìµœì í™”**:
   ```typescript
   import Image from 'next/image';
   <Image src="/avatar.png" width={64} height={64} alt="Avatar" />
   ```

3. **API ì‘ë‹µ ìºì‹±**:
   ```typescript
   const [data, setData] = useState(null);
   useEffect(() => {
     const cached = localStorage.getItem('dashboard_data');
     if (cached) setData(JSON.parse(cached));
     // ... fetch new data
   }, []);
   ```

### ë°±ì—”ë“œ

1. **ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±**:
   ```sql
   CREATE INDEX idx_messages_conversation_id ON messages(conversation_id);
   CREATE INDEX idx_emotion_logs_user_id_date ON emotion_logs(user_id, date DESC);
   ```

2. **ì¿¼ë¦¬ ìµœì í™”**:
   ```python
   # N+1 ë¬¸ì œ í•´ê²°: JOIN ì‚¬ìš©
   conversations = db.query(Conversation)\
       .options(joinedload(Conversation.character))\
       .filter(Conversation.user_id == user_id)\
       .all()
   ```

3. **ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°** (SSE):
   ```python
   async def stream_response():
       for token in llm_stream():
           yield f"data: {json.dumps({'token': token})}\n\n"
           await asyncio.sleep(0)  # ë¹„ë™ê¸° ì–‘ë³´
   ```

---

## ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ë¡œê¹…

**ë°±ì—”ë“œ ë¡œê¹…**:
```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

# ì‚¬ìš© ì˜ˆì‹œ
logger.info(f"ì‚¬ìš©ì {user_id} ëŒ€í™” ì‹œì‘")
logger.error(f"LLM ì˜¤ë¥˜: {error}")
```

**í”„ë¡ íŠ¸ì—”ë“œ ë¡œê¹…**:
```typescript
console.log('[API] ë©”ì‹œì§€ ì „ì†¡:', messageContent);
console.error('[API Error]', error);
```

### ì—ëŸ¬ ì¶”ì 

**ë°±ì—”ë“œ**:
```python
from fastapi import HTTPException

@router.post("/messages")
async def send_message(...):
    try:
        # ë¡œì§
        pass
    except OpenAIError as e:
        logger.error(f"OpenAI Error: {e}")
        raise HTTPException(status_code=503, detail="AI ì„œë¹„ìŠ¤ ì˜¤ë¥˜")
    except Exception as e:
        logger.exception("Unexpected error")
        raise HTTPException(status_code=500, detail="ì„œë²„ ì˜¤ë¥˜")
```

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

**ì£¼ìš” ì§€í‘œ**:
- API ì‘ë‹µ ì‹œê°„
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹œê°„
- LLM ì‘ë‹µ ì‹œê°„
- ì—ëŸ¬ìœ¨
- ë™ì‹œ ì ‘ì†ì ìˆ˜

---

## ë¬¸ì„œ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 2024-11-18 | 1.0.0 | ì´ˆê¸° ê¸°ìˆ  ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì‘ì„± |

---

## ì°¸ê³  ë¬¸ì„œ

- [LLM ì‹œìŠ¤í…œ ê°œìš”](./llm-system-overview.md)
- [ìºë¦­í„° ì„±ê²© ì‹œìŠ¤í…œ](./character-personality-system.md)
- [E2E ì‚¬ìš©ì í”Œë¡œìš°](./e2e-user-flow.md)
