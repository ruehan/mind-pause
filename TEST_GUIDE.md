# 테스트 가이드

> 구현 완료 기능 테스트 절차

## 🚀 빠른 시작

### 1. 백엔드 서버 실행

```bash
cd backend
source venv/bin/activate  # macOS/Linux
# 또는 venv\Scripts\activate  # Windows

python create_tables.py  # DB 테이블 생성 (최초 1회)
uvicorn app.main:app --reload --port 8000
```

서버 실행 후 http://localhost:8000/docs 접속하여 API 문서 확인

### 2. 프론트엔드 서버 실행

새 터미널에서:
```bash
cd /Users/hangyu/mind-pause
npm run dev
```

브라우저에서 http://localhost:5173 접속

## 📝 테스트 시나리오

### 시나리오 1: 피드백 시스템 (5분)

1. **로그인**
   - 기존 계정으로 로그인 또는 새 계정 생성

2. **AI 채팅**
   - 채팅 메뉴 클릭 → AI와 대화 시작
   - AI 응답 대기

3. **피드백 제공**
   - ✅ AI 메시지 하단에 피드백 버튼이 약하게 보임
   - ✅ 마우스 hover 시 완전히 보임
   - ✅ 👍 또는 👎 클릭
   - ✅ "감사합니다!" 또는 "의견 감사해요!" 메시지 표시
   - ✅ 버튼이 비활성화됨 (중복 방지)

4. **통계 확인**
   - 대시보드 메뉴 클릭
   - ✅ "AI 응답 피드백 통계" 카드 표시
   - ✅ 총 피드백 수, 긍정/부정 카운트 확인
   - ✅ 긍정 비율 프로그레스 바 확인
   - ✅ 최근 피드백 목록 확인 (부정 피드백이 먼저 표시)
   - ✅ 기간 선택 (7일/30일/90일) 변경 시 데이터 업데이트

**예상 결과**:
- 피드백이 즉시 반영됨
- 통계가 정확하게 표시됨
- UI가 반응형으로 작동함

### 시나리오 2: AI 응답 스타일 설정 (5분)

1. **설정 페이지 접근**
   - 프로필 메뉴 클릭
   - ✅ 왼쪽 메뉴에 "AI 응답 설정" 표시 (Bot 아이콘)
   - ✅ AI 응답 설정 클릭

2. **초기 로드**
   - ✅ 로딩 애니메이션 표시
   - ✅ 기본값 로드 (친근하게 / 적절하게 / 보통)
   - ✅ 미리보기 텍스트 표시

3. **옵션 변경**
   - 말투: "공식적으로" 선택
   - ✅ 선택한 카드가 강조됨 (primary 색상)
   - ✅ 미리보기 텍스트 즉시 변경

   - 응답 길이: "상세하게" 선택
   - ✅ 미리보기 텍스트 다시 변경

   - 공감 수준: "높음" 선택
   - ✅ 최종 미리보기 확인
   - ✅ 하단에 "변경사항이 있습니다" 알림

4. **저장**
   - "변경사항 저장" 버튼 클릭
   - ✅ "저장 중..." 표시
   - ✅ 성공 토스트 메시지
   - ✅ 변경사항 알림 사라짐

5. **지속성 확인**
   - 페이지 새로고침 (F5)
   - ✅ 설정이 유지되어 있음
   - 다른 페이지 갔다가 다시 옴
   - ✅ 설정이 여전히 유지됨

6. **기본값 재설정**
   - "기본값으로 재설정" 버튼 클릭
   - ✅ 친근하게 / 적절하게 / 보통으로 변경
   - ✅ 변경사항 알림 표시
   - 저장 버튼 클릭
   - ✅ 기본값으로 저장됨

**예상 결과**:
- 모든 옵션 변경이 즉시 반영됨
- 미리보기가 적절함
- 저장 후 설정이 영구적으로 유지됨

### 시나리오 3: E2E 통합 (10분)

1. **선호도 설정**
   - 프로필 > AI 응답 설정
   - 말투: "편하게", 길이: "간결하게", 공감: "높음"
   - 저장

2. **AI와 새 대화**
   - 채팅 페이지로 이동
   - 새 대화 시작
   - "오늘 하루가 힘들었어요" 메시지 전송
   - ✅ AI 응답이 간결하고 편안한 말투인지 확인
   - ✅ 공감 표현이 많은지 확인

3. **피드백 제공 및 선호도 조정**
   - 응답에 👎 피드백 (너무 간결한 경우)
   - 프로필 > AI 응답 설정
   - 길이: "적절하게"로 변경
   - 저장

4. **개선된 응답 확인**
   - 새 대화 시작
   - 같은 내용 전송
   - ✅ 응답이 더 상세해졌는지 확인
   - 만족스러우면 👍 피드백

5. **통계 확인**
   - 대시보드 이동
   - ✅ 피드백 통계에 모든 피드백 반영 확인

**예상 결과**:
- 선호도 변경이 AI 응답에 실제로 반영됨
- 피드백 루프가 정상 작동함
- Phase 2.2 시스템과 통합됨

## 🐛 알려진 이슈 체크

테스트 중 다음 사항들을 확인해주세요:

- [ ] 익명 사용자가 선호도 설정에 접근 시도 시 처리
- [ ] 매우 많은 피드백 데이터 로드 시 성능
- [ ] 선호도 변경이 진행중인 대화에 즉시 반영되는지
- [ ] 다른 캐릭터와 대화 시 선호도 적용 여부
- [ ] 여러 탭에서 동시 사용 시 동기화

## 📊 테스트 결과 기록

각 시나리오 완료 후 체크:

### 시나리오 1: 피드백 시스템
- [ ] 모두 통과
- [ ] 일부 이슈: ___________________
- [ ] 실패: _______________________

### 시나리오 2: 선호도 설정  
- [ ] 모두 통과
- [ ] 일부 이슈: ___________________
- [ ] 실패: _______________________

### 시나리오 3: E2E 통합
- [ ] 모두 통과
- [ ] 일부 이슈: ___________________
- [ ] 실패: _______________________

## 🔧 문제 발생 시

### 백엔드 에러
```bash
# 로그 확인
# 터미널에 에러 메시지 출력됨

# DB 재생성 (주의: 데이터 삭제됨)
cd backend
python create_tables.py
```

### 프론트엔드 에러
```bash
# 브라우저 콘솔 확인 (F12)
# 네트워크 탭에서 API 응답 확인

# 캐시 클리어
Ctrl+Shift+R (강력 새로고침)
```

### API 테스트
```bash
# Swagger UI 사용
http://localhost:8000/docs

# 또는 cURL
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8000/api/v1/user/preferences
```

## 📝 피드백 제출

테스트 완료 후 발견한 문제나 개선사항을 기록해주세요:

1. **버그**: 
2. **개선사항**:
3. **좋았던 점**:
